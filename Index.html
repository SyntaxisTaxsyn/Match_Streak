<html>
    <head>
        <style>
            
            /* not sure why the first css selector isnt working*/
            gamebutton{
                background-color: blue;
                color:brown;
                
            }
            button {
                background-color: rgb(107, 107, 107);
                color: rgb(0, 0, 0);
                font-style: oblique;
            }
        </style>
        <script>

            window.onload = function() { Create() };

            // Declare script variables
            // Care must be taken here to ensure the product of rows*columns = suits * 2
            var rows = 2
            var columns = 5
            var suits = 5

            var cardList = [];

            /*
            var cardLists = [
                { index: 0, design: 0, visible: 0 },
                { index: 1, design: 1, visible: 0 },
                { index: 2, design: 2, visible: 0 },
            ];
            */

            function randomizeCardSuits() {

                // Generate the random suits for the cards
                for (r = 1; r <= rows; r++) {
                    for (c = 1; c <= columns; c++) {

                        var noMatch = false;
                        var randomSuit = 0;

                        do {
                            // Find an unassigned element in the list
                            randomSuit = (Math.floor(Math.random() * (rows * columns)));
                            if (cardList[randomSuit].design == 0) {
                                cardList[randomSuit].design = c;
                                noMatch = true;
                            }

                        } while (noMatch == false);

                    }
                }

            }

            function GenerateCards(){

                cardlist = []; // assign it to empty array to start again
                var IndexCount = 1;

                // add default card objects to the list
                for (i=1; i <=(rows*columns);i++){
                    var newCard = {index:IndexCount, design:0, visible:0};
                    cardList.push(newCard);
                    IndexCount += 1;
                }

                randomizeCardSuits();

            }

            function Clicked(iNumber) {
                var suitToShow = cardList[iNumber-1].design
                if(cardList[iNumber-1].visible == 0){
                    document.getElementById(iNumber).src = suitToShow + ".png";
                    cardList[iNumber-1].visible = 1

                } else {
                    document.getElementById(iNumber).src = "CardBack.png";
                    cardList[iNumber-1].visible = 0
                }
                
            }

            function Create(){

                document.getElementById("ReplaceMe").innerHTML = GenerateTable(rows,columns);
                GenerateCards();
            }

            function additems(){
                var newitem = {one:1,two:2,three:3};
                for (i=0;i<6;i++){
                    testlist.push(newitem);
                };
                alert(testlist.length);
                alert(testlist[5].one);
            }

            function GenerateTable(iRows,iColumns){
                var tContent = "<table>"
                var cNum = 0
                for (i = 0; i < iRows; i++){
                    tContent += "<tr>"
                    for (j = 0; j < iColumns; j++){
                        cNum = GetCardNumber(iRows, i, iColumns, j)
                        tContent += "<td>" + '<img id=' + cNum + ' src="CardBack.png" width="150px" height="250px" onclick="Clicked(' + cNum + ')">' + "</td>"
                    }
                    tContent += "</tr>"
                }
                tContent += "</table>"
                return tContent
            }

            function GetCardNumber(iRows,iRow,iColumns,iCol){
                var cardNumber
                cardNumber = ((iRow) * iColumns) + iCol
                return cardNumber + 1
            }


            function resetGame() {

                turnAllCardsOver();
                resetSuitIds();
                randomizeCardSuits();

            }

            function turnAllCardsOver() {
                for (i = 0; i < cardList.length; i++) {
                    cardList[i].visible = 0;
                    document.getElementById(i+1).src = "CardBack.png";
                }
            }

            function resetSuitIds() {
                for (i = 0; i < cardList.length; i++) {
                    cardList[i].design = 0;
                }
            }

            function makecard() {

                /*
                let newcard = new Card(1, 2);
                alert(newcard.VisibilityState);
                newcard.VisibilityState = true;
                alert(newcard.VisibilityState);
                var myList = new Array();

                for (var i = 1; i < 3; i++) {
                    let newcard = new Card(i, 2);
                    myList.push(newcard);
                }

                alert(myList[0].VisibilityState + myList[1].VisibilityState);
                */
                alert(cardList[0].index);
                cardList[0].index = 3;
                alert(cardList[0].index);
            }

            function changeValue() {
                cardList[0].index = 2
            }


        </script>
    </head>
    <body>
        <h1>
            Match Streak V1.0 - By Paul Speirs (c) 2021
        </h1>
        <hr>
        <button class="gamebutton" onclick="resetGame()">Reset Game</button>
        <hr />
        <div id="ReplaceMe">

        </div>
    </body>
</html>